# SIM7000E
Low Power Arduino code 

Ο παρακάτω κώδικας χρησιμοποιεί έναν μικροελεγκτή Arduino με έναν αισθητήρα κωδικοποιητή (encoder) και έναν GSM/GPRS/NB-IoT module (DFRobot_SIM7000) για την επικοινωνία με έναν MQTT broker μέσω δικτύου κινητής τηλεφωνίας. Παρακάτω είναι μια σύντομη εξήγηση του κώδικα:

Διακοπές (Interrupts) αισθητήρα κωδικοποιητή:
Χρησιμοποιείται η συνάρτηση attachInterrupt() για να δηλωθεί μια διακοπή όταν αλλάζει κατάσταση το ENCODER_PIN1.
Η συνάρτηση handleEncoderChange() καλείται κατά την αλλαγή της κατάστασης του κωδικοποιητή.
Μεταβλητές encoder:

Οι μεταβλητές counter και encoder_direction χρησιμοποιούνται για την καταγραφή των αλλαγών στη θέση του κωδικοποιητή.

Ενεργοποίηση και ρύθμιση του SIM7000:
Στο τμήμα if (encoderChanged) ελέγχεται αν υπήρξε αλλαγή στον κωδικοποιητή.
Αν ναι, ενεργοποιείται το ΝΒ-ΙοΤ module (SIM7000) και ρυθμίζεται η σύνδεση με το δίκτυο.

Επικοινωνία με MQTT Broker:
Στη συνέχεια, εκτελούνται εντολές AT για τη ρύθμιση του MQTT broker και την αποστολή δεδομένων.

Καταγραφή και ύπνος:
Καταγράφονται η κατεύθυνση και η τρέχουσα τιμή του κωδικοποιητή.
Έπειτα, εκτελείται εντολή για να τερματιστεί η σύνδεση με το δίκτυο, και ο μικροελεγκτής τίθεται σε κατάσταση χαμηλής κατανάλωσης ενέργειας με τη χρήση της βιβλιοθήκης LowPower.
